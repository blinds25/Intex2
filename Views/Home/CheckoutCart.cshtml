@model CartViewModel

@{
    ViewData["Title"] = "Cart";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- head contents (omitted for brevity) -->
</head>

<body>

<style>
    .background-square {
        background-color: #d3d3d3;
        padding: 20px;
        margin-bottom: 20px;
    }
</style>

<div class="container">
    <div class="row">
            <h2>Your Cart</h2>
        <div class="col-8 background-square">
            @if (Model.CartItems.Count == 0)
            {
                <p>Your cart is empty.</p>
            }
            else
            {
                <table class="table">
                    <thead>
                    <tr>
                        <th>Item</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Total</th>
                    </tr>
                    </thead>
                    <tbody>
                    @foreach (var item in Model.CartItems)
                    {
                        <tr>
                            <td>@item.ItemName</td>
                            <td>$@item.ItemPrice</td>
                            <td>@item.Quantity</td>
                            <td>$@(item.ItemPrice * item.Quantity)</td>
                        </tr>
                    }
                    </tbody>
                </table>
                <h3>Total: $@Model.TotalPrice</h3>
            }
        </div>
            <div class="col-4 background-square">
                <div class="totals">
                    <h3>Cart totals</h3>
                    <div class="subtotal">
                        <strong>Subtotal</strong>
                        <span>$@Model.TotalPrice</span>
                    </div>
                    <div class="shipping">
                        <strong>Shipping</strong>
                        <div>
                            <input type="radio" id="free" name="shipping" value="0" checked>
                            <label for="free">Free shipping</label><br>
                            <input type="radio" id="flat" name="shipping" value="10">
                            <label for="flat">Flat rate: $10.00</label><br>
                            <input type="radio" id="pickup" name="shipping" value="15">
                            <label for="pickup">Pickup: $15.00</label>
                        </div>

                    </div>
                    <div class="total ">
                        <strong>Total</strong>
                        <span id="total">$@Model.TotalPrice</span>
                    </div>
                </div>
        </div>

        <br />
        <br />

            <div class="background-square">
                <form>
                    <h2>Review your order</h2>

                    <p>Please input the following information in order to get your lego set.</p>

                    <div>
                        <h3>Order total</h3>
                        <p>$@Model.TotalPrice</p>
                    </div>

                    <div>
                        <h3>Brickwell Member Information</h3>
                        <label>Customer ID: </label>
                        <input type="hidden" />

                        <label>Time: </label>
                        <input type="time" />

                        <label>Day of Week:</label>
                        <input type="week" />

                        <label>Prediction: </label>
                    </div>

                    <div>
                        <h3>Shipping Information</h3>
                        <label>Shipping Address: </label>
                        <input type="text" />
                    </div>

                    <div>
                        <h3>Payment Information</h3>
                        <label>Amount: </label>
                        <input type="number" />

                        <label>Entry Mode:</label>
                        <input type="text" />
                        <label>Transaction Type:</label>
                        <input type="text" />
                        <label>Type of Card: </label>
                        <input type="text" />
                        <label>Bank: </label>
                        <input type="text" />
                        <label>Country of Transaction: </label>
                        <input type="text" />
                    </div>

                    <!-- Add more form fields as necessary -->

                    <input type="submit" value="Place your order">
                </form>
        </div>
    </div>
</div>
</body>

<script>
    // Function to update the total cost
    function updateTotal() {
        // Get the subtotal
        var subtotalElement = document.getElementById('subtotal');
        var subtotal = parseFloat(subtotalElement.textContent.replace('$', ''));

        // Get the selected shipping value
        var shippingCost = parseFloat(document.querySelector('input[name="shipping"]:checked').value);

        // Calculate the new total
        var total = subtotal + shippingCost;

        // Update the total on the page
        var totalElement = document.getElementById('total');
        totalElement.textContent = '$' + total.toFixed(2);
    }

    // Add event listener to shipping options
    document.querySelectorAll('input[name="shipping"]').forEach(function (radio) {
        radio.addEventListener('change', updateTotal);
    });

    // Call updateTotal once at the start to set the initial total
    updateTotal();
</script>

</html>